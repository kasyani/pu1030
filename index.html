<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>í•‘í¬ íŒ¬ ê°¤ëŸ¬ë¦¬</title>
    <link href="https://fonts.googleapis.com/css2?family=Jua&display=swap" rel="stylesheet">
    <style>
        body {
            background: linear-gradient(to bottom, #ff9a9e, #fad0c4);
            margin: 0; padding: 50px 0;
            font-family: 'Jua', sans-serif;
            display: flex; flex-direction: column; align-items: center; min-height: 100vh;
        }

        /* ìƒë‹¨ í”„ë¡œí•„ ì˜ì—­ ìŠ¤íƒ€ì¼ */
        .profile-card {
            background: white; padding: 30px; border-radius: 30px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            margin-bottom: 30px; text-align: center;
        }

        .image-container { display: flex; justify-content: center; gap: 15px; }
        .profile-img { 
            width: 100px; height: 100px; 
            object-fit: cover; border-radius: 50%; 
            border: 4px solid #ffdde1;
            transition: 0.3s;
            cursor: pointer; 
        }
        .profile-img:hover { transform: scale(1.1); border-color: #ff6b81; }

        /* ê²Œì‹œíŒ ì»¨í…Œì´ë„ˆ */
        .board-container {
            width: 90%; max-width: 850px;
            background: white; padding: 30px; border-radius: 30px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }

        h1 { text-align: center; color: #ff6b81; margin-top: 0; }

        /* [ëª©ë¡ í™”ë©´] */
        #listView { display: block; }
        .btn-write-open {
            background: #ff6b81; color: white; border: none; padding: 12px 25px;
            border-radius: 15px; font-family: 'Jua'; font-size: 18px;
            cursor: pointer; float: right; margin-bottom: 20px;
        }

        table { width: 100%; border-collapse: collapse; clear: both; }
        th, td { padding: 15px; text-align: center; border-bottom: 1px solid #ffdde1; color: #555; }
        th { background: #fff0f3; color: #ff6b81; font-size: 18px; }
        .board-gif { width: 80px; height: 80px; object-fit: cover; border-radius: 10px; cursor: pointer; }

        /* [ê¸€ì“°ê¸° & ìƒì„¸ë³´ê¸° í™”ë©´] */
        #writeView, #detailView { display: none; }
        .form-group { margin-bottom: 20px; text-align: left; }
        label { display: block; color: #ff6b81; margin-bottom: 8px; font-size: 18px; }
        input[type="text"] { 
            width: 100%; padding: 15px; border-radius: 15px; 
            border: 2px solid #ffdde1; font-family: 'Jua'; box-sizing: border-box; 
            font-size: 16px; background: #fffafb;
        }

        /* ğŸ“ íŒŒì¼ ì—…ë¡œë“œ ë°•ìŠ¤ ìŠ¤íƒ€ì¼ */
        .upload-box {
            width: 100%; height: 180px; border: 3px dashed #ffdde1;
            border-radius: 20px; background: #fffafb;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            cursor: pointer; transition: 0.3s; color: #ff6b81;
        }
        .upload-box:hover, .upload-box.dragover { background: #fff0f3; border-color: #ff6b81; }
        .preview-img { width: 120px; height: 120px; object-fit: cover; border-radius: 10px; display: none; }

        .btn-group { display: flex; gap: 10px; margin-top: 30px; }
        .btn-main { flex: 2; background: #ff6b81; color: white; border: none; padding: 15px; border-radius: 15px; font-family: 'Jua'; font-size: 18px; cursor: pointer; }
        .btn-sub { flex: 1; background: #eee; color: #666; border: none; padding: 15px; border-radius: 15px; font-family: 'Jua'; font-size: 18px; cursor: pointer; }

        .detail-img { width: 100%; max-width: 500px; border-radius: 20px; margin: 25px 0; box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
    </style>
</head>
<body>

    <div class="profile-card">
        <div class="image-container">
            <a href="https://www.sooplive.co.kr/station/pu1030" target="_blank"><img src="pu.gif" alt="í‘¸ë¦°1" class="profile-img"></a>
            <a href="https://www.sooplive.co.kr/station/pu1030" target="_blank"><img src="pu2.gif" alt="í‘¸ë¦°2" class="profile-img"></a>
            <a href="https://www.sooplive.co.kr/station/pu1030" target="_blank"><img src="pu3.gif" alt="í‘¸ë¦°3" class="profile-img"></a>
        </div>
        <p style="color: #ff6b81; margin-top: 15px; font-size: 20px;">ğŸ’– ì¦ê±°ìš´ í‘¸ë¦° ê°¤ëŸ¬ë¦¬ ğŸ’–</p>
    </div>

    <div class="board-container">
        <div id="listView">
            <button class="btn-write-open" onclick="showView('writeView')">âœï¸ ê¸€ì“°ê¸°</button>
            <table>
                <thead>
                    <tr>
                        <th style="width: 10%">ë²ˆí˜¸</th>
                        <th style="width: 20%">ì›€ì§¤</th>
                        <th>ì œëª©</th>
                        <th style="width: 20%">ì‘ì„±ì</th>
                    </tr>
                </thead>
                <tbody id="boardBody"></tbody>
            </table>
        </div>

        <div id="writeView">
            <h1>âœï¸ ìƒˆë¡œìš´ ê¸€ ë‚¨ê¸°ê¸°</h1>
            <div class="form-group">
                <label>ê¸€ ì œëª©</label>
                <input type="text" id="postTitle" placeholder="ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”">
            </div>
            <div class="form-group">
                <label>ë‹‰ë„¤ì„</label>
                <input type="text" id="postAuthor" placeholder="ì‘ì„±ì ë‹‰ë„¤ì„">
            </div>
            <div class="form-group">
                <label>ì‚¬ì§„ (í´ë¦­í•˜ì—¬ íŒŒì¼ì„ ì°¾ê±°ë‚˜ ì—¬ê¸°ì— ëŒì–´ë‹¤ ë†“ìœ¼ì„¸ìš”)</label>
                <div class="upload-box" id="dropZone" onclick="document.getElementById('fileInput').click()">
                    <span id="uploadText">ğŸ“ ì—¬ê¸°ì— ì´ë¯¸ì§€ë¥¼ ë“œë˜ê·¸í•˜ê±°ë‚˜ í´ë¦­í•˜ì„¸ìš”</span>
                    <img id="uploadPreview" class="preview-img">
                    <input type="file" id="fileInput" accept="image/*" style="display:none" onchange="previewFile(this.files[0])">
                </div>
            </div>
            <div class="btn-group">
                <button class="btn-sub" onclick="resetWriteView(); showView('listView');">ì·¨ì†Œ</button>
                <button class="btn-main" onclick="addPost()">âœ¨ ê²Œì‹œë¬¼ ì˜¬ë¦¬ê¸°</button>
            </div>
        </div>

        <div id="detailView">
            <h1 id="detTitle" style="margin-bottom: 10px;">ì œëª©</h1>
            <p style="text-align:center; color:gray; font-size: 18px;">ì‘ì„±ì: <span id="detAuthor" style="color:#ff6b81"></span></p>
            <hr style="border: 0; border-top: 1px solid #ffdde1;">
            <div style="text-align:center;"><img id="detImg" src="" class="detail-img"></div>
            <div class="btn-group">
                <button class="btn-main" onclick="showView('listView')">ëª©ë¡ìœ¼ë¡œ ëŒì•„ê°€ê¸°</button>
            </div>
        </div>
    </div>

    <script>
        let currentFileData = ""; // ì„ íƒëœ ì´ë¯¸ì§€ ë°ì´í„°ë¥¼ ì €ì¥í•  ë³€ìˆ˜

        function showView(viewId) {
            document.getElementById('listView').style.display = 'none';
            document.getElementById('writeView').style.display = 'none';
            document.getElementById('detailView').style.display = 'none';
            document.getElementById(viewId).style.display = 'block';
        }

        // íŒŒì¼ ë¯¸ë¦¬ë³´ê¸° ë° ì²˜ë¦¬
        function previewFile(file) {
            if (!file) return;
            const reader = new FileReader();
            reader.onload = function(e) {
                currentFileData = e.target.result; // ì´ë¯¸ì§€ ë°ì´í„°ë¥¼ ë³€ìˆ˜ì— ì €ì¥
                document.getElementById('uploadText').style.display = 'none';
                const preview = document.getElementById('uploadPreview');
                preview.src = currentFileData;
                preview.style.display = 'block';
            };
            reader.readAsDataURL(file);
        }

        // ë“œë˜ê·¸ ì•¤ ë“œë¡­ ì„¤ì •
        const dropZone = document.getElementById('dropZone');
        dropZone.addEventListener('dragover', (e) => { e.preventDefault(); dropZone.classList.add('dragover'); });
        dropZone.addEventListener('dragleave', () => { dropZone.classList.remove('dragover'); });
        dropZone.addEventListener('drop', (e) => {
            e.preventDefault();
            dropZone.classList.remove('dragover');
            previewFile(e.dataTransfer.files[0]);
        });

        function addPost() {
            const title = document.getElementById('postTitle').value;
            const author = document.getElementById('postAuthor').value;
            if (!title || !author || !currentFileData) { alert("ì œëª©, ë‹‰ë„¤ì„, ì‚¬ì§„ì„ ëª¨ë‘ í™•ì¸í•´ì£¼ì„¸ìš”! ğŸ€"); return; }
            
            const posts = JSON.parse(localStorage.getItem('myFanGallery')) || [];
            posts.unshift({ title, author, gif: currentFileData });
            localStorage.setItem('myFanGallery', JSON.stringify(posts));
            
            resetWriteView();
            loadPosts(); 
            showView('listView');
        }

        function resetWriteView() {
            document.getElementById('postTitle').value = '';
            document.getElementById('postAuthor').value = '';
            document.getElementById('fileInput').value = '';
            document.getElementById('uploadPreview').style.display = 'none';
            document.getElementById('uploadText').style.display = 'block';
            currentFileData = "";
        }

        function loadPosts() {
            const boardBody = document.getElementById('boardBody');
            const posts = JSON.parse(localStorage.getItem('myFanGallery')) || [];
            let html = `
                <tr>
                    <td>í‘¸ë¦°</td>
                    <td><img src="pu.gif" class="board-gif"></td>
                    <td style="text-align:left; cursor:pointer;" onclick="alert('í‘¸ë¦°ì´ ì¡´ì˜ˆ!')"><b>í‘¸ë¦°ì´ ì¡´ì˜ˆ!</b></td>
                    <td>ëŒ„</td>
                </tr>
            `;
            posts.forEach((p, i) => {
                html += `
                    <tr>
                        <td>${posts.length - i}</td>
                        <td><img src="${p.gif}" class="board-gif" onclick="viewDetail(${i})"></td>
                        <td style="text-align:left; cursor:pointer;" onclick="viewDetail(${i})">${p.title}</td>
                        <td>${p.author}</td>
                    </tr>
                `;
            });
            boardBody.innerHTML = html;
        }

        function viewDetail(index) {
            const posts = JSON.parse(localStorage.getItem('myFanGallery'));
            const data = posts[index];
            document.getElementById('detTitle').innerText = data.title;
            document.getElementById('detAuthor').innerText = data.author;
            document.getElementById('detImg').src = data.gif;
            showView('detailView');
        }
        window.onload = loadPosts;
    </script>
</body>
</html>
